<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Hasan Ali Yücel Kitap Kafe Menü</title>
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    

    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #4a102a;
            color: #fcf259;
        }

        .category-buttons {
            margin-bottom: 1.5rem;
        }

            .category-buttons button {
                background-color: transparent;
                color: #fcf259;
                border: 2px solid #fcf259;
                border-radius: 12px;
                padding: 0.5rem 1.5rem;
                font-weight: 600;
            }

        .sub-category-title {
            font-size: 1.2rem;
            margin-top: 1.5rem;
            color: #fcf259;
            font-weight: 600;
        }

        .card {
            border: none;
            border-radius: 16px;
            background-color: #85193c;
            color: #fcf259;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transition: all 0.3s ease-in-out;
        }

        .card:hover {
             transform: translateY(-5px);
             box-shadow: 0 6px 16px rgba(0,0,0,0.15);
        }


        .card img {
                max-height: 150px;
                object-fit: cover;
                border-radius: 10px;
        }

        .card h5 {
                font-weight: bold;
                color: #fcf259;
        }

        .text-price {
            font-size: 1.4rem;
            color: #e67e22;
            font-weight: bold;
        }


        @media (max-width: 768px) {
            .admin-button {
                position: fixed;
                bottom: 20px;
                right: 20px;
                z-index: 999;
                border-radius: 30px;
            }
        }
    </style>
</head>
<body class="p-3">
    <div class="text-end mb-3">
        <a href="/admin-login.html" class="btn btn-outline-secondary btn-sm">
            🔐 Admin Giriş
        </a>
    </div>

    <div class="container">
        <h2 class="text-center mb-4">📋 Hasan Ali Yücel Kitap Kafe Menü</h2>

        <!-- Sekmeler -->
        <div class="d-flex justify-content-center gap-3 category-buttons">
            <button class="btn btn-outline-dark" onclick="filterCategory('Yiyecek')"><strong>🍽️ Yiyecekler</strong></button>
            <button class="btn btn-outline-dark" onclick="filterCategory('İçecek')"><strong>🥤 İçecekler</strong></button>
        </div>

        <!-- Ürün listesi -->
        <div id="menuContainer"></div>
    </div>

    <script>
        let allItems = [];

        async function getMenuItems() {
            const response = await fetch('https://qrmenu-api-mhfs.onrender.com/api/menu')
;
            allItems = await response.json();
            filterCategory('Yiyecek'); // varsayılan
        }

        function filterCategory(category) {
            const filtered = allItems.filter(item => item.category === category);
            renderGroupedMenu(filtered);
        }

        function renderGroupedMenu(items) {
            const grouped = {};
            items.forEach(item => {
                const sub = item.subCategory || "Genel";
                if (!grouped[sub]) grouped[sub] = [];
                grouped[sub].push(item);
            });

            const container = document.getElementById("menuContainer");
            container.innerHTML = '';

            for (const subCategory in grouped) {
                const subDiv = document.createElement('div');
                subDiv.innerHTML = `<div class="sub-category-title">${subCategory}</div>`;

                const row = document.createElement('div');
                row.className = 'row g-3 mb-4';

                grouped[subCategory].forEach(item => {
                    const col = document.createElement('div');
                    col.className = 'col-md-4 col-sm-6';

                    col.innerHTML = `
                    <div class="card p-3 shadow-sm h-100">
                      ${item.imageUrl ? `<img src="${item.imageUrl}" alt="${item.name}" class="img-fluid mb-2 rounded" />` : ''}
                      <h5>${item.name}</h5>
                      <p class="text-muted small">${item.description || ''}</p>
                      <strong class="text-price">${item.price}₺</strong>
                    </div>
                  `;

                    row.appendChild(col);
                });

                subDiv.appendChild(row);
                container.appendChild(subDiv);
            }
        }

        getMenuItems();
    </script>
</body>
</html>